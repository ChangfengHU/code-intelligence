<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.vyibc.code-assistant</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-name -->
    <name>Code Assistant</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://www.vyibc.com">VYIBC</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-description -->
    <description><![CDATA[
        Code Assistant enhances IntelliJ with AI‑powered code translation, explanation, and interactive chat. It supports OpenAI, DeepSeek, Qwen, and Gemini providers, offers line‑by‑line replacements, session history, and deep analysis to help you understand and refactor code faster.
    ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <applicationConfigurable
            parentId="tools"
            instance="com.vyibc.codeassistant.settings.CodeAssistantConfigurable"
            id="com.vyibc.codeassistant.settings"
            displayName="Code Assistant"/>
        <applicationService serviceImplementation="com.vyibc.codeassistant.settings.CodeAssistantSettings"/>
    </extensions>

    <actions>
        <!-- 代码翻译组（恢复） -->
        <group id="CodeTranslationGroup" text="代码翻译" popup="true">
            <action id="DirectTranslateAction"
                    class="com.vyibc.codeassistant.actions.DirectTranslateAction"
                    text="直接翻译"
                    description="显示翻译结果对话框"/>
            <action id="FullReplaceAction"
                    class="com.vyibc.codeassistant.actions.FullReplaceAction"
                    text="全文替换"
                    description="将选中文本替换为翻译结果"/>
            <action id="LineByLineReplaceAction"
                    class="com.vyibc.codeassistant.actions.LineByLineReplaceAction"
                    text="逐行插入"
                    description="在原文行下方插入翻译行"/>
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
        </group>

        <!-- 代码发音组（恢复） -->
        <group id="CodePronunciationGroup" text="代码发音" popup="true">
            <action id="EnglishPronunciationAction"
                    class="com.vyibc.codeassistant.actions.EnglishPronunciationAction"
                    text="英语发音"
                    description="对选中的英文文本进行发音"/>
            <action id="ChinesePronunciationAction"
                    class="com.vyibc.codeassistant.actions.ChinesePronunciationAction"
                    text="中文发音"
                    description="将选中英文翻译成中文并发音"/>
            <action id="EnglishChinesePronunciationAction"
                    class="com.vyibc.codeassistant.actions.EnglishChinesePronunciationAction"
                    text="英中对照发音"
                    description="先发音英文，再发音中文翻译"/>
            <action id="PhoneticInsertionAction"
                    class="com.vyibc.codeassistant.actions.PhoneticInsertionAction"
                    text="音标插入"
                    description="在代码下方插入英文音标"/>
            <action id="PronunciationAssistAction"
                    class="com.vyibc.codeassistant.actions.PronunciationAssistAction"
                    text="发音辅助"
                    description="插入中文谐音辅助发音"/>
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="CodeTranslationGroup"/>
        </group>

        <!-- 代码解释组（恢复） -->
        <group id="CodeExplanationGroup" text="代码解释" popup="true">
            <action id="BasicCodeExplanationAction"
                    class="com.vyibc.codeassistant.actions.BasicCodeExplanationAction"
                    text="基础解释"
                    description="对代码中的注释和字符串进行基础翻译"/>
            <action id="DeepCodeExplanationAction"
                    class="com.vyibc.codeassistant.actions.DeepCodeExplanationAction"
                    text="深度解释"
                    description="对代码进行深度分析，添加详细的逻辑解释和作用说明"/>
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="CodePronunciationGroup"/>
        </group>

        <!-- 代码对话组（保留） -->
        <group id="CodeChatGroup" text="代码对话" popup="true">
            <action id="CodeChatAction"
                    class="com.vyibc.codeassistant.actions.CodeChatAction"
                    text="问答助手"
                    description="基于选中代码进行智能问答，支持多轮对话和上下文分析"/>
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="CodeExplanationGroup"/>
        </group>
    </actions>
</idea-plugin>
